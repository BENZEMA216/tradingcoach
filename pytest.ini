[pytest]
# pytest 配置文件
# 设置测试发现、覆盖率和标记

# 测试目录
testpaths = tests

# Python 文件命名模式
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 默认选项
addopts =
    -v
    --tb=short
    --strict-markers

# 自定义标记
markers =
    slow: 标记为慢速测试 (使用 -m "not slow" 跳过)
    benchmark: 性能基准测试
    integration: API 集成测试
    contract: 契约测试
    data_integrity: 数据完整性测试

# 覆盖率配置 (需要 pytest-cov)
# 使用: pytest --cov=src --cov-report=html --cov-fail-under=80

# 超时配置 (需要 pytest-timeout)
timeout = 60

# 并行测试 (需要 pytest-xdist)
# 使用: pytest -n auto

# 日志配置
log_cli = true
log_cli_level = WARNING
log_file = logs/pytest.log
log_file_level = DEBUG

# 忽略警告
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

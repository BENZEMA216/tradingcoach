# Trading Coach å¯è§†åŒ–å·¥å…·

## æ¦‚è¿°

Trading Coach Dashboard æ˜¯ä¸€ä¸ªåŸºäº Streamlit çš„äº¤äº’å¼å¯è§†åŒ–åˆ†æå·¥å…·ï¼Œå¸®åŠ©ä½ æ·±å…¥ç†è§£äº¤æ˜“è¡¨ç°ã€éªŒè¯ç³»ç»Ÿé€»è¾‘ã€å¹¶æŒç»­æ”¹è¿›äº¤æ˜“è´¨é‡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ“Š æ•°æ®æ¦‚è§ˆ

- **æ•´ä½“ç»Ÿè®¡**: äº¤æ˜“è®°å½•ã€æŒä»“æ•°é‡ã€æ•°æ®è¦†ç›–ç‡ã€æ€»ç›ˆäºç­‰æ ¸å¿ƒæŒ‡æ ‡
- **æ•°æ®è¦†ç›–ç‡åˆ†æ**: æ£€æŸ¥å“ªäº›è‚¡ç¥¨æœ‰å¸‚åœºæ•°æ®ï¼Œå“ªäº›ç¼ºå¤±
- **è¯¦ç»†åˆ—è¡¨**: æŒ‰è‚¡ç¥¨æŸ¥çœ‹äº¤æ˜“æ¬¡æ•°å’Œæ•°æ®çŠ¶æ€
- **å¿«é€Ÿç­›é€‰**: æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰å’Œå¤šç§æ’åºæ–¹å¼

### â­ è´¨é‡è¯„åˆ†

- **è¯„åˆ†åˆ†å¸ƒ**: ç›´æ–¹å›¾å’Œé¥¼å›¾å±•ç¤ºè¯„åˆ†åˆ†å¸ƒå’Œç­‰çº§åˆ†å¸ƒ
- **å››ç»´åº¦åˆ†æ**: é›·è¾¾å›¾å±•ç¤ºè¿›åœºã€å‡ºåœºã€è¶‹åŠ¿ã€é£é™©å››ä¸ªç»´åº¦çš„å¹³å‡åˆ†
- **ç›ˆäºåˆ†æ**: æ•£ç‚¹å›¾å±•ç¤ºè¯„åˆ†ä¸ç›ˆäºç‡çš„å…³ç³»
- **è¯„åˆ†è¶‹åŠ¿**: æ—¶é—´åºåˆ—å›¾å±•ç¤ºè¯„åˆ†éšæ—¶é—´çš„å˜åŒ–
- **è¯¦ç»†åˆ—è¡¨**: æ”¯æŒæŒ‰è‚¡ç¥¨ã€ç­‰çº§ã€ç›ˆäºçŠ¶æ€ç­›é€‰å’Œæ’åº
- **æŒä»“è¯¦æƒ…**: æŸ¥çœ‹å•ä¸ªæŒä»“çš„è¯¦ç»†ä¿¡æ¯å’Œå››ç»´åº¦è¯„åˆ†

### ğŸ”„ FIFO éªŒè¯

- **äº¤æ˜“åºåˆ—**: æŒ‰æ—¶é—´é¡ºåºæ˜¾ç¤ºæ‰€æœ‰ä¹°å…¥å’Œå–å‡ºäº¤æ˜“
- **FIFO åŒ¹é…æ¨¡æ‹Ÿ**: æ‰‹åŠ¨æ¨¡æ‹Ÿå…ˆè¿›å…ˆå‡ºåŒ¹é…è¿‡ç¨‹
- **è¯¦ç»†è®¡ç®—**: æ˜¾ç¤ºæ¯ä¸ªåŒ¹é…çš„æ•°é‡ã€ä»·æ ¼ã€æ‰‹ç»­è´¹ã€ç›ˆäºè®¡ç®—
- **æ•°æ®åº“å¯¹æ¯”**: å°†æ‰‹åŠ¨è®¡ç®—ä¸æ•°æ®åº“è®°å½•è¿›è¡Œå¯¹æ¯”éªŒè¯
- **äº¤æ˜“æ—¶é—´è½´**: å¯è§†åŒ–ä¹°å…¥å’Œå–å‡ºç‚¹ä½
- **éªŒè¯æ£€æŸ¥æ¸…å•**: ç³»ç»ŸåŒ–çš„éªŒè¯æ­¥éª¤

### ğŸ“ˆ æŠ€æœ¯æŒ‡æ ‡

- **Kçº¿å›¾**: äº¤äº’å¼ Candlestick å›¾è¡¨
- **æŠ€æœ¯æŒ‡æ ‡**: MA5/MA20/MA50ã€å¸ƒæ—å¸¦ã€RSIã€MACD
- **äº¤æ˜“æ ‡æ³¨**: åœ¨å›¾è¡¨ä¸Šæ ‡æ³¨ä¹°å…¥å’Œå–å‡ºç‚¹ä½
- **æŒ‡æ ‡ç»Ÿè®¡**: å½“å‰å€¼ã€è¶…ä¹°è¶…å–æç¤ºã€é‡‘å‰æ­»å‰åˆ¤æ–­
- **äº¤æ˜“ç»Ÿè®¡**: ä¹°å…¥å–å‡ºæ¬¡æ•°ã€å¹³å‡ä»·æ ¼ã€æ€»é‡ç­‰
- **æ•°æ®è´¨é‡éªŒè¯**: è‡ªåŠ¨æ£€æŸ¥æ•°æ®å®Œæ•´æ€§å’Œæ­£ç¡®æ€§

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd tradingcoach
pip install -r requirements.txt
```

### 2. å¯åŠ¨ä»ªè¡¨æ¿

```bash
streamlit run visualization/dashboard.py
```

æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ `http://localhost:8501`

### 3. å¯¼èˆªä½¿ç”¨

- å·¦ä¾§è¾¹æ é€‰æ‹©ä¸åŒçš„é¡µé¢
- ä¸»é¡µæ˜¾ç¤ºç³»ç»ŸçŠ¶æ€å’Œå¿«é€Ÿé“¾æ¥
- æ¯ä¸ªé¡µé¢éƒ½æœ‰ç­›é€‰ã€æ’åºã€åˆ·æ–°ç­‰äº¤äº’åŠŸèƒ½

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: æ£€æŸ¥æ•°æ®å®Œæ•´æ€§

1. æ‰“å¼€"ğŸ“Š æ•°æ®æ¦‚è§ˆ"é¡µé¢
2. æŸ¥çœ‹æ•°æ®è¦†ç›–ç‡
3. è¯†åˆ«ç¼ºå¤±æ•°æ®çš„è‚¡ç¥¨
4. è¿è¡Œæ•°æ®è¡¥å……å‘½ä»¤

### åœºæ™¯ 2: åˆ†æäº¤æ˜“è´¨é‡

1. æ‰“å¼€"â­ è´¨é‡è¯„åˆ†"é¡µé¢
2. æŸ¥çœ‹æ•´ä½“è¯„åˆ†åˆ†å¸ƒ
3. åˆ†æå››ç»´åº¦è¡¨ç°
4. æ‰¾å‡ºé«˜åˆ†å’Œä½åˆ†äº¤æ˜“çš„ç‰¹å¾
5. æŸ¥çœ‹ç‰¹å®šæŒä»“çš„è¯¦ç»†è¯„åˆ†

### åœºæ™¯ 3: éªŒè¯ FIFO é€»è¾‘

1. æ‰“å¼€"ğŸ”„ FIFO éªŒè¯"é¡µé¢
2. é€‰æ‹©è¦éªŒè¯çš„è‚¡ç¥¨
3. æŸ¥çœ‹äº¤æ˜“åºåˆ—å’ŒåŒ¹é…è¿‡ç¨‹
4. å¯¹æ¯”æ‰‹åŠ¨è®¡ç®—ä¸æ•°æ®åº“è®°å½•
5. ä½¿ç”¨æ£€æŸ¥æ¸…å•ç³»ç»ŸåŒ–éªŒè¯

### åœºæ™¯ 4: æŠ€æœ¯åˆ†æ

1. æ‰“å¼€"ğŸ“ˆ æŠ€æœ¯æŒ‡æ ‡"é¡µé¢
2. é€‰æ‹©è‚¡ç¥¨å’Œæ—¥æœŸèŒƒå›´
3. é€‰æ‹©è¦æ˜¾ç¤ºçš„æŠ€æœ¯æŒ‡æ ‡
4. æŸ¥çœ‹äº¤æ˜“ç‚¹ä½æ˜¯å¦åˆç†
5. éªŒè¯æŠ€æœ¯æŒ‡æ ‡æ•°æ®è´¨é‡

## é¡¹ç›®ç»“æ„

```
visualization/
â”œâ”€â”€ __init__.py                 # åŒ…åˆå§‹åŒ–
â”œâ”€â”€ dashboard.py                # ä¸»å…¥å£ï¼ˆé¦–é¡µï¼‰
â”œâ”€â”€ README.md                   # æœ¬æ–‡æ¡£
â”œâ”€â”€ pages/                      # å¤šé¡µé¢åº”ç”¨
â”‚   â”œâ”€â”€ 1_ğŸ“Š_æ•°æ®æ¦‚è§ˆ.py
â”‚   â”œâ”€â”€ 2_â­_è´¨é‡è¯„åˆ†.py
â”‚   â”œâ”€â”€ 3_ğŸ”„_FIFOéªŒè¯.py
â”‚   â””â”€â”€ 4_ğŸ“ˆ_æŠ€æœ¯æŒ‡æ ‡.py
â”œâ”€â”€ components/                 # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ charts.py              # å›¾è¡¨ç»„ä»¶
â”‚   â””â”€â”€ metrics.py             # æŒ‡æ ‡å¡ç‰‡
â””â”€â”€ utils/                      # å·¥å…·å‡½æ•°
    â””â”€â”€ data_loader.py         # æ•°æ®åŠ è½½å™¨
```

## æŠ€æœ¯æ ˆ

- **Streamlit**: Web åº”ç”¨æ¡†æ¶
- **Plotly**: äº¤äº’å¼å›¾è¡¨åº“
- **Pandas**: æ•°æ®å¤„ç†
- **SQLAlchemy**: æ•°æ®åº“ ORM

## é…ç½®

### æ•°æ®åº“è·¯å¾„

é»˜è®¤æ•°æ®åº“è·¯å¾„: `data/tradingcoach.db`

å¦‚éœ€ä¿®æ”¹ï¼Œç¼–è¾‘ `visualization/utils/data_loader.py`:

```python
DB_PATH = Path(__file__).parent.parent.parent / 'data' / 'tradingcoach.db'
```

### ç«¯å£é…ç½®

é»˜è®¤ç«¯å£: `8501`

ä¿®æ”¹ç«¯å£:

```bash
streamlit run visualization/dashboard.py --server.port 8502
```

### ä¸»é¢˜é…ç½®

åˆ›å»º `.streamlit/config.toml`:

```toml
[theme]
primaryColor = "#1f77b4"
backgroundColor = "#ffffff"
secondaryBackgroundColor = "#f0f2f6"
textColor = "#262730"
font = "sans serif"
```

## æ€§èƒ½ä¼˜åŒ–

### æ•°æ®ç¼“å­˜

Streamlit è‡ªåŠ¨ç¼“å­˜æ•°æ®åŠ è½½ç»“æœã€‚å¦‚éœ€åˆ·æ–°:

- ç‚¹å‡»é¡µé¢ä¸Šçš„"ğŸ”„ åˆ·æ–°æ•°æ®"æŒ‰é’®
- æˆ–åœ¨æµè§ˆå™¨ä¸­æŒ‰ `R` é”®

### é™åˆ¶æ•°æ®é‡

å¯¹äºå¤§æ•°æ®é›†ï¼Œå¯ä»¥é™åˆ¶æ˜¾ç¤ºæ•°é‡:

```python
# åœ¨é¡µé¢ä»£ç ä¸­è°ƒæ•´
limit = st.number_input("æ˜¾ç¤ºæ•°é‡", min_value=10, max_value=500, value=50)
```

## å¸¸è§é—®é¢˜

### Q1: ä»ªè¡¨æ¿å¯åŠ¨å¤±è´¥

**é—®é¢˜**: è¿è¡Œ `streamlit run` åæŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…
pip list | grep streamlit
pip list | grep plotly

# é‡æ–°å®‰è£…
pip install -r requirements.txt
```

### Q2: æ•°æ®åº“è¿æ¥é”™è¯¯

**é—®é¢˜**: æ˜¾ç¤º"æ— æ³•è¿æ¥æ•°æ®åº“"

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls data/tradingcoach.db

# æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®
# ç¼–è¾‘ visualization/utils/data_loader.py ä¸­çš„ DB_PATH
```

### Q3: å›¾è¡¨ä¸æ˜¾ç¤º

**é—®é¢˜**: é¡µé¢åŠ è½½ä½†å›¾è¡¨ä¸ºç©º

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®ï¼ˆæ•°æ®æ¦‚è§ˆé¡µé¢ï¼‰
- å°è¯•åˆ·æ–°é¡µé¢ (æŒ‰ `R` é”®)
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ JavaScript é”™è¯¯

### Q4: é¡µé¢åŠ è½½ç¼“æ…¢

**é—®é¢˜**: åˆ‡æ¢é¡µé¢æˆ–ç­›é€‰æ•°æ®æ—¶å¾ˆæ…¢

**è§£å†³æ–¹æ¡ˆ**:
- å‡å°‘æ˜¾ç¤ºçš„æ•°æ®é‡
- æ¸…é™¤ç¼“å­˜åé‡å¯: `streamlit cache clear`
- é™åˆ¶æ—¥æœŸèŒƒå›´å’Œè‚¡ç¥¨æ•°é‡

### Q5: æŠ€æœ¯æŒ‡æ ‡ä¸æ˜¾ç¤º

**é—®é¢˜**: Kçº¿å›¾æ˜¾ç¤ºä½†æ²¡æœ‰æŠ€æœ¯æŒ‡æ ‡

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥å¸‚åœºæ•°æ®æ˜¯å¦åŒ…å«æŠ€æœ¯æŒ‡æ ‡
python3 scripts/verify_indicators.py AAPL

# é‡æ–°è·å–å¸‚åœºæ•°æ®
python3 scripts/supplement_data_from_csv.py --from-db --force
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `pages/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶: `5_ğŸ¯_æ–°åŠŸèƒ½.py`
2. ä½¿ç”¨æ ‡å‡†é¡µé¢æ¨¡æ¿:

```python
import streamlit as st
from visualization.utils.data_loader import get_data_loader

st.set_page_config(page_title="æ–°åŠŸèƒ½", page_icon="ğŸ¯", layout="wide")
st.title("ğŸ¯ æ–°åŠŸèƒ½")

loader = get_data_loader()
# ... ä½ çš„ä»£ç 
```

### æ·»åŠ æ–°å›¾è¡¨

åœ¨ `components/charts.py` ä¸­æ·»åŠ æ–°å‡½æ•°:

```python
def create_new_chart(df: pd.DataFrame) -> go.Figure:
    """åˆ›å»ºæ–°å›¾è¡¨"""
    fig = go.Figure()
    # ... åˆ›å»ºå›¾è¡¨
    return fig
```

### æ·»åŠ æ–°æŒ‡æ ‡

åœ¨ `components/metrics.py` ä¸­æ·»åŠ æ–°ç»„ä»¶:

```python
def new_metric_card(value: float) -> str:
    """æ–°æŒ‡æ ‡å¡ç‰‡"""
    return f"<span>...</span>"
```

## éƒ¨ç½²

### æœ¬åœ°éƒ¨ç½²

```bash
streamlit run visualization/dashboard.py
```

### Streamlit Cloud éƒ¨ç½²

1. æ¨é€ä»£ç åˆ° GitHub
2. è®¿é—® [share.streamlit.io](https://share.streamlit.io)
3. è¿æ¥ä»“åº“å¹¶éƒ¨ç½²

### Docker éƒ¨ç½²

åˆ›å»º `Dockerfile`:

```dockerfile
FROM python:3.10-slim

WORKDIR /app
COPY . /app

RUN pip install -r requirements.txt

EXPOSE 8501

CMD ["streamlit", "run", "visualization/dashboard.py", "--server.port=8501", "--server.address=0.0.0.0"]
```

æ„å»ºå’Œè¿è¡Œ:

```bash
docker build -t tradingcoach-dashboard .
docker run -p 8501:8501 tradingcoach-dashboard
```

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-11)

- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ“Š æ•°æ®æ¦‚è§ˆé¡µé¢
- â­ è´¨é‡è¯„åˆ†é¡µé¢
- ğŸ”„ FIFO éªŒè¯é¡µé¢
- ğŸ“ˆ æŠ€æœ¯æŒ‡æ ‡é¡µé¢
- ğŸ¨ å“åº”å¼è®¾è®¡
- âš¡ æ•°æ®ç¼“å­˜ä¼˜åŒ–

## åé¦ˆå’Œè´¡çŒ®

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼åé¦ˆ:

- GitHub Issues
- é¡¹ç›®æ–‡æ¡£
- ä»£ç æ³¨é‡Š

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

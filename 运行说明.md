# 交易复盘系统 - 运行说明

## 📋 系统介绍

这是一个基于Streamlit的交互式交易复盘Web应用，提供：

- 📊 **仪表盘**: 关键指标卡片、盈亏曲线、AI洞察、市场分布
- 📋 **交易列表**: 可筛选、可排序的交易记录表格
- 📅 **周期性报告**: 自定义时间范围的详细分析报告
- 🔍 **单笔交易详情**: 每笔交易的深度分析

## 🚀 快速启动

### 1. 安装依赖

```bash
pip install pandas numpy streamlit plotly
```

### 2. 运行应用

```bash
streamlit run app.py
```

### 3. 访问应用

应用会自动在浏览器中打开，默认地址：
```
http://localhost:8501
```

## 📊 功能特性

### 仪表盘页面

- **关键指标卡片**: 总交易笔数、总盈亏、胜率、总费用、日均交易
- **盈亏曲线**: 交互式累计盈亏折线图
- **AI洞察**: 自动识别问题和机会
  - 胜率警告（<30%）
  - 费用占比分析
  - 实时建议
- **市场分布**: 饼图展示美股/港股占比
- **交易方向**: 柱状图展示买入/卖出分布

### 交易列表页面

- **多维度筛选**:
  - 按市场筛选（美股/港股）
  - 按方向筛选（买入/卖出/卖空）
  - 按标的筛选
- **实时统计**: 显示筛选后的记录数
- **数据导出**: 支持CSV格式下载

### 周期性报告页面

- **自定义时间范围**: 选择任意开始和结束日期
- **绩效概览**: 交易笔数、配对交易、盈利/亏损笔数
- **盈亏分析**:
  - 总盈亏、胜率、平均盈利/亏损
  - 盈亏分布直方图
  - 持仓时间分布
- **标的分析**: 交易最频繁的TOP 10标的
- **时间分析**: 星期几交易分布

### 单笔交易详情页面

- **交易选择**: 下拉菜单快速选择任意交易
- **详细信息**:
  - 基本信息（标的、市场、持仓天数）
  - 买入信息（时间、价格、金额）
  - 卖出信息（时间、价格、金额）
- **盈亏分析**: 盈亏金额、盈亏率、价格变化
- **AI分析**: 针对单笔交易的分析和建议

## 🎨 可视化图表

### 使用的图表类型

1. **折线图**: 累计盈亏曲线
2. **柱状图**: 交易次数、方向分布、星期几分布
3. **饼图**: 市场分布
4. **直方图**: 盈亏分布、持仓时间分布

### 交互功能

- 悬停显示详细数据
- 点击图例显示/隐藏系列
- 图表缩放和平移
- 数据下载（部分图表）

## 📁 文件说明

- **app.py**: Streamlit主应用程序
- **analyze_trades.py**: 命令行数据分析脚本（备用）
- **paired_trades_analysis.csv**: 配对交易数据
- **第一份交易复盘报告.md**: 文本格式复盘报告（参考）

## 🔧 技术栈

- **Python 3.11+**
- **Streamlit**: Web应用框架
- **Pandas**: 数据处理
- **Plotly**: 交互式图表
- **NumPy**: 数值计算

## 💡 使用建议

1. **首次使用**: 先查看"仪表盘"页面，了解整体情况
2. **深入分析**: 使用"周期性报告"选择特定时间段分析
3. **问题交易**: 在"单笔交易详情"中查看每笔亏损交易
4. **数据筛选**: 在"交易列表"中筛选特定标的或市场

## ⚠️ 注意事项

1. 首次加载可能需要几秒钟处理数据
2. 配对交易使用简化算法（同标的买入后的第一笔卖出）
3. 复杂交易（分批建仓/减仓）可能配对不准确
4. 建议使用Chrome或Firefox浏览器以获得最佳体验

## 🚧 已知限制（MVP版本）

- 配对算法较简单，不支持复杂的分批交易
- 没有实时行情数据集成
- 暂未实现AI对话功能
- 不支持用户标注和笔记

## 📈 未来计划

- 改进配对交易算法
- 集成实时行情数据
- 实现AI对话功能
- 添加用户标注和笔记功能
- 支持PDF报告导出
- 添加策略回测功能

## 🆘 常见问题

**Q: 应用启动失败？**
A: 确保安装了所有依赖，并且CSV数据文件路径正确

**Q: 图表显示不正常？**
A: 尝试清除浏览器缓存或更换浏览器

**Q: 数据更新后需要重新加载吗？**
A: 是的，修改CSV文件后需要刷新页面（按R键）

**Q: 可以同时分析多个账户吗？**
A: 当前版本不支持，这是未来计划的功能

## 📞 反馈与支持

如有问题或建议，请在项目仓库提交Issue。

---

**最后更新**: 2025-11-12
**版本**: v1.0 MVP
